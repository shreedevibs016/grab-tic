{% extends 'base.html' %}

{% block main%}

<main class="main">
  <section class="section"
           style="padding-top:120px; background:#0c0c0c; min-height:100vh; color:white;">

    <div class="container d-flex justify-content-center">

      <div class="card shadow-lg"
           style="max-width:720px; width:100%; background:#141414; border-radius:14px;">

        <!-- Top Bar -->
        <div class="d-flex justify-content-between align-items-center p-3"
             style="border-bottom:1px dashed #333;">
          <h5 class="mb-0">ðŸŽŸ My Ticket</h5>

          <!-- Download Icon -->
          <a href="{% url 'ticket-pdf' transaction.uuid %}" title="Download Ticket" class="text-warning fs-4">
            <i class="bi bi-download"></i>
          </a>
        </div>

        <!-- Movie Image -->
        <img src="{{ transaction.payment.booking.movie.photo.url }}"
             alt="Movie Poster"
             style="height:350px;width: 300px; object-fit:cover; border-radius:0 0 0 0;">

        <div class="card-body p-4">

          <!-- Movie Name -->
          <h3 class="fw-bold mb-1">{{ transaction.payment.booking.movie.name }}</h3>
          {% show_runtime transaction.payment.booking.movie.runtime as runtime %}
          <p class="text-muted mb-3">{% for language in transaction.payment.booking.movie.languages.all %} {{ language.name }} {% endfor %}â€¢ {{ runtime }} â€¢ {{ transaction.payment.booking.movie.certification.name }} â€¢ {% for gen in transaction.payment.booking.movie.genre.all %} {{ gen.name }} {% endfor %} </p>

          <hr>

          <!-- Ticket Info -->
          <div class="row mb-2">
            <div class="col-6 text-muted">Theatre</div>
            <div class="col-6 text-end fw-semibold">
              {{ transaction.payment.booking.screen_date_time.theatre.name }}, {{ transaction.payment.booking.screen_date_time.theatre.place.name }}
            </div>
          </div>

          <div class="row mb-2">
            <div class="col-6 text-muted">Screen</div>
            <div class="col-6 text-end fw-semibold">
              {{ transaction.payment.booking.screen_date_time.screen.name }}
            </div>
          </div>

          <div class="row mb-2">
            <div class="col-6 text-muted">Date</div>
            <div class="col-6 text-end fw-semibold">
              {{ transaction.payment.booking.screen_date_time.date.date | date:'d M Y' }}
            </div>
          </div>

          <div class="row mb-2">
            <div class="col-6 text-muted">Show Time</div>
            <div class="col-6 text-end fw-semibold">
              {{ transaction.payment.booking.screen_date_time.time.time|time:'h:i A' }}
            </div>
          </div>

          <div class="row mb-2">
            <div class="col-6 text-muted">Seats</div>
            <div class="col-6 text-end fw-semibold">
              {% for seat in transaction.payment.booking.seats.all %}{{ seat.row }}{{ seat.seat_num }} {% endfor %}
            </div>
          </div>

          <hr>

          <!-- Price -->
          <div class="d-flex justify-content-between align-items-center">
            <span class="text-muted">Total Paid</span>
            <span class="fs-4 fw-bold text-warning">â‚¹{{ transaction.amount }}</span>
          </div>

        </div>
      </div>
    </div>

  </section>
</main>

{% endblock %}  